{% extends 'base_dashboard.html' %}
{% load static %}

{% block extra_css %}
<style>
    .reset-container {
        max-width: 600px;
        margin: 2rem auto;
        padding: 2rem;
        background: white;
        border-radius: 12px;
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    }
    
    .warning-box {
        background-color: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 8px;
        padding: 1.5rem;
        margin-bottom: 2rem;
    }
    
    .warning-box h4 {
        color: #856404;
        margin-bottom: 1rem;
    }
    
    .warning-box ul {
        color: #856404;
        margin-bottom: 0;
    }
    
    .stats-box {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 1.5rem;
        margin-bottom: 2rem;
    }
    
    .stats-box h5 {
        color: #495057;
        margin-bottom: 1rem;
    }
    
    .stat-item {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0;
        border-bottom: 1px solid #e9ecef;
    }
    
    .stat-item:last-child {
        border-bottom: none;
    }
    
    .stat-label {
        font-weight: 500;
        color: #495057;
    }
    
    .stat-value {
        color: #6c757d;
    }
    
    .btn-danger {
        background-color: #dc3545;
        border: none;
        padding: 0.75rem 2rem;
        border-radius: 8px;
        font-weight: 600;
        font-size: 1.1rem;
    }
    
    .btn-danger:hover {
        background-color: #c82333;
        transform: translateY(-1px);
    }
    
    .btn-secondary {
        background-color: #6c757d;
        border: none;
        padding: 0.75rem 2rem;
        border-radius: 8px;
        font-weight: 600;
    }
    
    .btn-secondary:hover {
        background-color: #545b62;
    }
    
    .page-title {
        color: #dc3545;
        margin-bottom: 1.5rem;
        text-align: center;
    }
    
    .icon-large {
        font-size: 3rem;
        margin-bottom: 1rem;
        display: block;
        text-align: center;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="reset-container">
        <div class="icon-large">
            <i class="fas fa-exclamation-triangle text-warning"></i>
        </div>
        
        <h1 class="page-title">
            <i class="fas fa-undo me-2"></i>Reset All to Store
        </h1>
        
        <div class="warning-box">
            <h4><i class="fas fa-warning me-2"></i>Warning: This action cannot be undone!</h4>
            <p>This will reset ALL equipment and accessories back to the store. This action will:</p>
            <ul>
                <li>Set all equipment status to "In Store"</li>
                <li>Remove all user assignments from equipment</li>
                <li>Set all accessories status to "In Store"</li>
                <li>Remove all equipment-accessory links</li>
                <li>Clear all assignment and return dates</li>
                <li>Clear all comments and return notes</li>
            </ul>
        </div>
        
        <div class="stats-box">
            <h5><i class="fas fa-chart-bar me-2"></i>Current System Status</h5>
            <div class="stat-item">
                <span class="stat-label">Equipment in Store:</span>
                <span class="stat-value">{{ equipment_in_store }} items</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Equipment Assigned:</span>
                <span class="stat-value">{{ equipment_assigned }} items</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Accessories in Store:</span>
                <span class="stat-value">{{ accessories_in_store }} items</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Accessories Assigned:</span>
                <span class="stat-value">{{ accessories_assigned }} items</span>
            </div>
        </div>
        
        <div class="d-flex justify-content-between">
            <a href="{% url 'store' %}" class="btn btn-secondary">
                <i class="fas fa-times me-2"></i>Cancel
            </a>
            <form method="post" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you absolutely sure you want to reset ALL equipment and accessories to store? This action cannot be undone!')">
                    <i class="fas fa-undo me-2"></i>Reset All to Store
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
